query AllPurchases($stripeId: String) {
  allPurchases(condition: { stripeId: $stripeId }) {
    nodes {
      id
      createdAt
      walletByBuyerWalletId {
        partiesByWalletId(first: 1) {
          nodes {
            name
          }
        }
      }
      transactionsByPurchaseId {
        nodes {
          units
        }
      }
      creditVintageByCreditVintageId {
        id
        creditClassByCreditClassId {
          creditClassVersionsById(orderBy: CREATED_AT_DESC, first: 1) {
            nodes {
              name
              metadata
            }
          }
        }
        walletByIssuerId {
          partiesByWalletId(first: 1) {
            nodes {
              name
              organizationsByPartyId(first: 1) {
                nodes {
                  id
                  organizationMembersByOrganizationId(condition: { isOwner: true }) {
                    nodes {
                      userByMemberId {
                        partyByPartyId {
                          name
                          roles
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
        projectByProjectId {
          name
          area
          areaUnit
          image
          addressByAddressId {
            feature
          }
          partyByDeveloperId {
            id
            name
            organizationsByPartyId(first: 1) {
              nodes {
                id
                organizationMembersByOrganizationId(condition: { isOwner: true }) {
                  nodes {
                    userByMemberId {
                      partyByPartyId {
                        name
                        roles
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
